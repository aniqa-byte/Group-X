<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Users</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.0/angular.js"></script>
    <script src="library.js"></script>
    <script src="users_dashboard.js"></script>
    <link href="./main.css" rel="stylesheet" />
</head>
<body>
    <div class="box">
        <div class="header">
            <div class="header_top">
                <div class="title_row">
                    <h1>Reader App</h1>
                    <p>Group-X Project</p>
                </div>
            </div>
            <div class="menu_row">
                <ul id="menu">
                    <li class="live"><a href="./index.html">Home</a></li>
                    <li><a href="./books_dashboard.html">Books</a></li>
                    <li><a href="./users_dashboard.html">Users</a></li>
                </ul>
            </div>
        </div>
        <hr>
        <div class=site_content>
            <h1>All Users</h1>
            <div ng-app="mainApp" ng-controller="usersController" class="all_users_table">
                <table border=1>
                    <tr>
                        <th>User ID</th>
                        <th>User Email</th>
                    </tr>
                    <tr ng-repeat = "user in users">
                        <td>{{ user.id }}</td>
                        <td>{{ user.email }}</td>
                        <td><input type="button" ng-click="selectUser(user.email)" value="Select"></td>
                    </tr>
                </table>
                <hr><br>
                <div id="selected" class="selected_table">
                    <h3>User: {{ selectedUser.email }}</h3>
                    <table border="1">
                        <tr>
                            <th>User ID</th>
                            <th>User Email</th>
                        </tr>
                        <tr>
                            <td>{{ selectedUser.id }}</td>
                            <td>{{ selectedUser.email }}</td>
                            <td><input type="button" ng-click="deleteUser(selectedUser.email)" value="Delete" /></td>
                        </tr>
                    </table>
                    <hr>
                    <h4>Update User Details</h4>
                    <table>
                        <th>User</th>
                        <th>{{ selectedUser.id }}</th>
                        <tr>
                            <td>Update Email:</td>
                            <input type="hidden" ng-value="{{ selectedUser.id }}" />
                            <td><input type="text" ng-model="update_email.email" /></td>
                            <td><input type="button" ng-click="updateUserEmail()" value="Update"></td>
                        </tr>
                        <tr>
                            <td>Update Password:</td>
                            <td><input type="text" ng-model="update_password.password"></td>
                            <td><input type="button" ng-click="updateUserPass(selectedUser.id)" value="Update"></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
</body>
</html>